"use strict";(self["webpackChunkwud_ui"]=self["webpackChunkwud_ui"]||[]).push([[399],{5994:function(t,e,r){r.r(e),r.d(e,{default:function(){return U}});var i=r(4112),s=r(1484),a=r(3449),n=r(9991),o=r(6930),u=r(2756),l=r(3307),c=r(812),d=r(723),h=r(8944),p=function(){var t=this,e=t._self._c;return e(a.A,{staticClass:"login-background"},[e(n.A,{attrs:{value:!0,width:"400px",persistent:!0,"no-click-animation":!0,"overlay-color":"primary","overlay-opacity":"1"}},[e(s.A,[e(a.A,[e(u.A,{staticClass:"ma-1",attrs:{justify:"center"}},[e(i.A,{attrs:{color:"primary",size:"80"}},[e(o.A,{attrs:{dark:"","x-large":""}},[t._v("mdi-account")])],1)],1),e(u.A,[e(a.A,[e(d.A,{model:{value:t.strategySelected,callback:function(e){t.strategySelected=e},expression:"strategySelected"}},t._l(t.strategies,(function(r){return e(l.A,{key:r.name,staticClass:"text-body-2"},[t._v(" "+t._s(r.name)+" ")])})),1),e(h.A,{model:{value:t.strategySelected,callback:function(e){t.strategySelected=e},expression:"strategySelected"}},t._l(t.strategies,(function(r){return e(c.A,{key:r.type+r.name},["basic"===r.type?e("login-basic",{on:{"authentication-success":t.onAuthenticationSuccess}}):t._e(),"oidc"===r.type?e("login-oidc",{attrs:{name:r.name},on:{"authentication-success":t.onAuthenticationSuccess}}):t._e()],1)})),1)],1)],1)],1)],1)],1)],1)},m=[],y=(r(4114),r(8992),r(4520),r(2577),r(5156)),g=r(3740),f=r(2938),w=(r(3949),r(5803)),v=r(7717),_=r(7540),k=r(4152),A=(0,w.A)(v.A,(0,_.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),r={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(r.valid=e(t)))})):r.valid=e(t),r},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const r=this.watchers.find((t=>t._uid===e._uid));r&&(r.valid(),r.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},(0,k.$c)(this))}}),b=r(7112),$=function(){var t=this,e=t._self._c;return e(A,{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}}},[e(f.OQ,[e(b.A,{attrs:{label:"Username","append-icon":"mdi-account",rules:[t.rules.required],outlined:"",autofocus:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(b.A,{attrs:{label:"Password",type:"password","append-icon":"mdi-lock",rules:[t.rules.required],outlined:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(g.A,{attrs:{block:"",color:"primary",disabled:!t.valid},on:{click:t.login}},[t._v(" Login ")])],1)],1)},S=[],x={data(){return{username:"",password:"",rules:{required:t=>!!t||"Required"}}},computed:{valid(){return""!==this.username&&""!==this.password}},methods:{async login(){if(this.valid)try{await(0,y.eg)(this.username,this.password),this.$emit("authentication-success")}catch(t){this.$root.$emit("notify","Username or password error","error")}}}},B=x,E=r(1656),C=(0,E.A)(B,$,S,!1,null,null,null),O=C.exports,V=function(){var t=this,e=t._self._c;return e(A,{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}}},[e(f.OQ,[e(g.A,{attrs:{block:"",color:"primary"},on:{click:t.redirect}},[e(o.A,{attrs:{color:"warning"}},[t._v("mdi-openid")]),t._v(" Â Connect ")],1)],1)],1)},q=[],z={props:{name:{type:String,required:!0}},data(){return{}},methods:{async redirect(){const t=await(0,y.Kg)(this.name);window.location.href=t.url}}},L=z,j=(0,E.A)(L,V,q,!1,null,null,null),I=j.exports,K=r.p+"img/wud-logo.7cd2d8d4.svg",P={components:{LoginBasic:O,LoginOidc:I},data(){return{logo:K,strategies:[],strategySelected:void 0}},methods:{isSupportedStrategy(t){switch(t.type){case"basic":return!0;case"oidc":return!0;default:}},onAuthenticationSuccess(){this.$router.push(this.$route.query.next||"/")}},async beforeRouteEnter(t,e,r){try{const t=await(0,y.E)();t.find((t=>"anonymous"===t.type))&&r("/");const e=t.find((t=>"oidc"===t.type&&t.redirect));if(e){const t=await(0,y.Kg)(e.name);window.location.href=t.url}else r((async e=>{e.strategies=t.filter(e.isSupportedStrategy)}))}catch(i){this.$root.$emit("notify",`Error when trying to get the authentication strategies (${i.message})`,"error")}}},Q=P,R=(0,E.A)(Q,p,m,!1,null,null,null),U=R.exports}}]);
//# sourceMappingURL=399.0b09f5a5.js.map