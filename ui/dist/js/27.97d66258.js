"use strict";(self["webpackChunkwud_ui"]=self["webpackChunkwud_ui"]||[]).push([[27],{3273:function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var n=i(2938),a=i(4414),r=i(3449),o=i(2756),s=function(){var e=this,t=e._self._c;return t(r.A,{attrs:{fluid:""}},[e._l(e.triggers,(function(e){return t(o.A,{key:e.id},[t(a.A,{staticClass:"pt-2 pb-2",attrs:{cols:12}},[t("trigger-detail",{attrs:{trigger:e}})],1)],1)})),0===e.triggers.length?t(o.A,[t(n.ZR,{staticClass:"text-h6"},[e._v("No triggers configured")])],1):e._e()],2)},l=[],c=i(301),d=i(3740),u=i(1484),g=i(3180),m=i(5961),p=i(6930),f=i(8983),h=i(7296),v=i(8924),k=i(1314),_=i(9981),w=i(1034),A=i(7112),b=i(2367),y=function(){var e=this,t=e._self._c;return t(u.A,[t(c.A,{staticStyle:{cursor:"pointer"},attrs:{flat:"",dense:"",tile:""},on:{click:function(t){return e.collapse()}}},[t(b.sw,{staticClass:"text-body-3"},[t(g.A,{attrs:{label:"",color:"info",outlined:""}},[e._v(e._s(e.trigger.type))]),e._v(" / "),t(g.A,{attrs:{label:"",color:"info",outlined:""}},[e._v(e._s(e.trigger.name))])],1),t(w.A),t(p.A,[e._v(e._s(e.trigger.icon))]),t(p.A,[e._v(e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down"))])],1),t(m.Qo,[t(n.OQ,{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}]},[t(o.A,[t(a.A,{attrs:{cols:"8"}},[e.configurationItems.length>0?t(f.A,{attrs:{dense:""}},e._l(e.configurationItems,(function(i){return t(h.A,{key:i.key},[t(v.pr,[t(v.UZ,{staticClass:"text-capitalize"},[e._v(e._s(i.key))]),t(v.w,[e._v(" "+e._s(e._f("formatValue")(i.value))+" ")])],1)],1)})),1):t("span",[e._v("Default configuration")])],1),t(a.A,{staticClass:"text-right",attrs:{cols:"4"}},[t(d.A,{staticClass:"accent",attrs:{outlined:"",small:""},on:{click:function(t){e.showTestForm=!0}}},[e._v(" Test "),t(p.A,{attrs:{right:""}},[e._v("mdi-test-tube")])],1),t(k.A,{attrs:{absolute:"",right:"",temporary:"",width:"512"},model:{value:e.showTestForm,callback:function(t){e.showTestForm=t},expression:"showTestForm"}},[t(r.A,{staticClass:"text-left"},[t(n.ZR,{staticClass:"text-body-1"},[t(p.A,[e._v("mdi-test-tube")]),e._v(" Test trigger")],1),t(A.A,{attrs:{label:"Container ID","append-icon":"mdi-identifier",outlined:"",dense:""},model:{value:e.container.id,callback:function(t){e.$set(e.container,"id",t)},expression:"container.id"}}),t(A.A,{attrs:{label:"Container Name","append-icon":"mdi-pencil",outlined:"",dense:""},model:{value:e.container.name,callback:function(t){e.$set(e.container,"name",t)},expression:"container.name"}}),t(A.A,{attrs:{label:"Container Watcher","append-icon":"mdi-update",outlined:"",dense:""},model:{value:e.container.watcher,callback:function(t){e.$set(e.container,"watcher",t)},expression:"container.watcher"}}),t(_.A,{attrs:{label:"Update kind",items:["digest","tag"],"append-icon":"tag"===e.container.updateKind.kind?"mdi-tag":"mdi-pound",outlined:"",dense:""},model:{value:e.container.updateKind.kind,callback:function(t){e.$set(e.container.updateKind,"kind",t)},expression:"container.updateKind.kind"}}),"tag"===e.container.updateKind.kind?t(_.A,{attrs:{label:"Update semver diff",items:["major","minor","patch"],"append-icon":"major"===e.container.updateKind.semverDiff?"mdi-alert":"minor"===e.container.updateKind.semverDiff?"mdi-alert-decagram":"mdi-information",outlined:"",dense:""},model:{value:e.container.updateKind.semverDiff,callback:function(t){e.$set(e.container.updateKind,"semverDiff",t)},expression:"container.updateKind.semverDiff"}}):e._e(),t(A.A,{attrs:{label:"Container local value","append-icon":"mdi-tag",outlined:"",dense:""},model:{value:e.container.updateKind.localValue,callback:function(t){e.$set(e.container.updateKind,"localValue",t)},expression:"container.updateKind.localValue"}}),t(A.A,{attrs:{label:"Container remote value","append-icon":"mdi-tag-check",outlined:"",dense:""},model:{value:e.container.updateKind.remoteValue,callback:function(t){e.$set(e.container.updateKind,"remoteValue",t)},expression:"container.updateKind.remoteValue"}}),t(d.A,{staticClass:"accent",attrs:{outlined:"",small:"",block:"",loading:e.isTriggering},on:{click:e.runTrigger}},[e._v("Run trigger")])],1)],1)],1)],1)],1)],1)],1)},x=[],C=(i(1454),i(3032)),K={components:{},props:{trigger:{type:Object,required:!0}},data(){return{showDetail:!1,showTestForm:!1,isTriggering:!1,container:{id:"123456789",name:"container_test",watcher:"watcher_test",updateKind:{kind:"tag",semverDiff:"major",localValue:"1.2.3",remoteValue:"4.5.6",result:{link:"https://my-container/release-notes/"}}}}},computed:{configurationItems(){return Object.keys(this.trigger.configuration||[]).map((e=>({key:e,value:this.trigger.configuration[e]}))).sort(((e,t)=>e.key.localeCompare(t.key)))}},methods:{collapse(){this.showDetail=!this.showDetail},async runTrigger(){this.isTriggering=!0;try{await(0,C.kg)({triggerType:this.trigger.type,triggerName:this.trigger.name,container:this.container}),this.$root.$emit("notify","Trigger executed with success")}catch(e){this.$root.$emit("notify",`Trigger executed with error (${e.message}})`,"error")}finally{this.isTriggering=!1}}},filters:{formatValue(e){return void 0===e||null===e||""===e?"<empty>":e}}},T=K,D=i(1656),$=(0,D.A)(T,y,x,!1,null,null,null),V=$.exports,j={data(){return{triggers:[]}},components:{TriggerDetail:V},async beforeRouteEnter(e,t,i){try{const e=await(0,C.fE)();i((t=>t.triggers=e))}catch(n){this.$root.$emit("notify",`Error when trying to load the triggers (${n.message})`,"error")}i()}},F=j,I=(0,D.A)(F,s,l,!1,null,null,null),N=I.exports}}]);
//# sourceMappingURL=27.97d66258.js.map